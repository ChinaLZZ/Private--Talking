# Private Talking Chat

一个功能完整的Python聊天软件，支持多客户端连接、私聊、群聊、文件传输、隐私模式等功能。

## 功能特性

### 核心功能
- ✅ 多客户端连接服务器
- ✅ 用户名注册和身份验证
- ✅ 一对一私聊消息
- ✅ 群组聊天功能
- ✅ 文件传输功能
- ✅ 隐私模式（阅后即焚消息）
- ✅ 多语言支持（中文/英文）
- ✅ 图形用户界面（GUI）

### 高级功能
- ✅ 服务器端消息日志记录
- ✅ 文件传输日志记录
- ✅ 用户在线状态管理
- ✅ 群组邀请和成员管理
- ✅ 实时消息推送
- ✅ 数据库存储（SQLite）
- ✅ 服务器GUI管理界面
- ✅ 用户锁安全功能
- ✅ 实时聊天会话监控

## 系统要求

- Python 3.6+
- tkinter（通常随Python安装）
- 网络连接

## 安装和运行

### 1. 安装依赖
```bash
# 项目使用Python标准库，无需额外安装依赖
# 确保Python 3.6+已安装
```

### 2. 启动服务器
```bash
# 方法1：直接运行
python start_server.py

# 方法2：运行服务器模块
python server.py
```

### 3. 启动客户端
```bash
# 方法1：直接运行
python start_client.py

# 方法2：运行客户端模块
python client.py
```

## 使用说明

### 服务器端
1. 运行 `start_server.py`
2. 服务器GUI界面将显示当前IP、在线用户、群组和聊天会话
3. 服务器会自动记录所有消息和文件传输日志
4. 可以实时监控所有聊天会话，包括隐私模式消息
5. 支持用户锁功能，保护服务器管理界面

### 客户端
1. 运行 `start_client.py`
2. 选择语言（中文/英文）
3. 输入用户名和服务器IP地址
4. 点击"连接"按钮
5. 连接成功后即可开始聊天

### 功能操作

#### 私聊
- 在左侧"在线用户"列表中选择用户
- 在消息输入框输入消息
- 可选择"隐私模式"发送阅后即焚消息
- 点击"发送"按钮或按回车键发送

#### 群聊
- 点击"创建群组"创建新群组
- 点击"加入群组"加入现有群组
- 在左侧"群组"列表中选择群组
- 发送消息到群组

#### 文件传输
- 选择聊天对象（仅支持私聊）
- 点击"发送文件"按钮
- 选择要发送的文件
- 接收方会收到文件保存对话框

#### 隐私模式
- 勾选"隐私模式"复选框
- 发送的消息将在5秒后自动删除
- 服务器仍会记录消息日志
- 服务器管理员可以实时查看所有聊天内容

## 文件结构

```
Private Talking/
├── server.py              # 服务器端程序（带GUI管理界面）
├── client.py              # 客户端程序
├── start_server.py        # 服务器启动脚本
├── start_client.py        # 客户端启动脚本
├── start_server.bat       # Windows服务器启动脚本
├── start_client.bat       # Windows客户端启动脚本
├── test_chat.py           # 功能测试脚本
├── requirements.txt       # 依赖文件
├── README.md             # 项目说明
├── QUICK_START.md        # 快速启动指南
├── PROJECT_SUMMARY.md    # 项目总结
└── chat_server.db        # 服务器数据库（自动创建）
```

## 技术特性

### 网络通信
- 使用TCP Socket进行客户端-服务器通信
- JSON格式消息传输
- 多线程处理并发连接

### 数据存储
- SQLite数据库存储消息和文件传输记录
- 自动创建数据库表结构
- 支持消息类型和隐私模式标记

### 用户界面
- 基于tkinter的图形界面
- 响应式布局设计
- 多语言界面支持

### 安全特性
- 用户名唯一性验证
- 隐私模式消息自动销毁
- 服务器端完整日志记录
- 用户锁保护服务器管理界面
- 密码验证机制

## 配置说明

### 服务器配置
- 默认监听端口：5000
- 默认监听地址：0.0.0.0（所有网络接口）
- 数据库文件：chat_server.db

### 客户端配置
- 默认连接端口：5000
- 默认服务器地址：127.0.0.1（本地）
- 支持自定义服务器IP地址

## 故障排除

### 常见问题

1. **连接失败**
   - 检查服务器是否已启动
   - 确认服务器IP地址正确
   - 检查防火墙设置

2. **用户名已存在**
   - 选择其他用户名
   - 等待其他用户断开连接

3. **文件传输失败**
   - 检查文件大小（建议小于10MB）
   - 确认网络连接稳定
   - 检查磁盘空间

4. **界面显示异常**
   - 确保Python版本为3.6+
   - 检查tkinter是否正确安装

## 开发说明

### 扩展功能
- 支持添加更多语言
- 可扩展消息类型
- 可添加加密功能
- 可支持更多文件格式

### 代码结构
- 模块化设计
- 清晰的类结构
- 详细的注释说明
- 异常处理机制

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 联系方式

如有问题或建议，请通过GitHub Issues联系。 